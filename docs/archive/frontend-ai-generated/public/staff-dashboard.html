<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Staff Dashboard</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<!-- ...existing content... -->

	<script>
		(async () => {
			const session = JSON.parse(sessionStorage.getItem('movexsecuresession') || '{}');
			if (!session.token) {
				window.location.href = 'index.html';
				return;
			}

			try {
				const response = await fetch('http://localhost:4000/api/dashboard/profile', {
					headers: {
						'Authorization': `Bearer ${session.token}`,
						'Content-Type': 'application/json'
					}
				});

				if (!response.ok) throw new Error('Session invalid');

				const data = await response.json();
				const roleElement = document.getElementById('user-role-display') || document.createElement('div');
				roleElement.textContent = `Welcome, ${data.role.toUpperCase()} Dashboard`;
				roleElement.className = 'dashboard-welcome';
				roleElement.style.cssText = 'padding: 20px; background: #10b981; color: white; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: bold;';
				document.querySelector('main')?.prepend(roleElement);
			} catch (error) {
				sessionStorage.removeItem('movexsecuresession');
				window.location.href = 'index.html';
			}
		})();
	</script>
</body>
</html>