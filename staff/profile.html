<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Staff Dashboard - MoveX</title>
    <!-- Fonts & Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles/base.css?v=4">
    <link rel="stylesheet" href="../styles/components.css?v=4">
    <link rel="stylesheet" href="../styles/admin.css?v=4">
    <script src="../js/config.js?v=1"></script>
    <script src="../js/dashboard-guard.js?v=3"></script>
</head>

<body>
    <div class="admin-layout">
        <aside class="sidebar" id="sidebar">
            <!-- Injected -->
        </aside>

        <div class="main-content">
            <header class="top-nav" id="topNav">
                <!-- Injected -->
            </header>

            <main>
                <div class="dashboard-container">
                    <h1 class="page-title">My Profile</h1>

                    <div class="card" style="max-width: 600px; margin-top: 2rem;">
                        <h3 class="card-title">Personal Information</h3>
                        <div style="display: grid; gap: 1.5rem; margin-top: 1rem;">
                            <div class="form-group">
                                <label class="form-label">Full Name</label>
                                <div id="p-name" class="form-input"
                                    style="background: var(--surface-secondary); border:none;">Loading...</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Username</label>
                                <div id="p-username" class="form-input"
                                    style="background: var(--surface-secondary); border:none;">Loading...</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phone</label>
                                <div id="p-phone" class="form-input"
                                    style="background: var(--surface-secondary); border:none;">Loading...</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Assigned Hub</label>
                                <div id="p-hub" class="form-input"
                                    style="background: var(--surface-secondary); border:none;">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="../js/staff-layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.StaffLayout) window.StaffLayout.init('profile'); // 'profile' active

            // Load Profile Data
            fetch(`${API_URL}/api/me`)
                .then(res => res.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById('p-name').textContent = data.user.full_name;
                        document.getElementById('p-username').textContent = data.user.username;
                        document.getElementById('p-phone').textContent = data.user.phone || 'N/A';
                        document.getElementById('p-hub').textContent = data.organization ? data.organization.name : 'Unknown Hub';
                    }
                });
        });
    </script>
</body>

</html>