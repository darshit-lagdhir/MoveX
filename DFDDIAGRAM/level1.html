<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoveX Engine | DFD Level 1 (Ultra Spacious)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-soft: #f8fafc;
            --border: #1e293b;
            --grid: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #ffffff;
            color: #0f172a;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .system-nav {
            background: #ffffff;
            border-bottom: 2px solid #f1f5f9;
            display: flex;
            padding: 0 25px;
            height: 55px;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
            z-index: 1000;
        }

        .brand {
            font-weight: 800;
            font-size: 0.9rem;
            color: var(--primary);
            letter-spacing: -0.02em;
        }

        .tabs {
            display: flex;
            gap: 6px;
        }

        .tab-btn {
            text-decoration: none;
            color: #64748b;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 6px;
            text-transform: uppercase;
        }

        .tab-btn.active {
            background: var(--primary);
            color: #fff;
        }

        .viewport {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #ffffff;
            padding: 10px;
            overflow: hidden;
        }

        svg {
            width: 100%;
            height: 100%;
            max-width: 1900px;
            /* Maximum Width */
            max-height: 100%;
        }

        .box-entity {
            fill: white;
            stroke: var(--border);
            stroke-width: 2.5;
            rx: 4;
        }

        .box-process {
            fill: var(--primary-soft);
            stroke: var(--primary);
            stroke-width: 3.5;
            rx: 8;
        }

        .box-store {
            fill: white;
            stroke: #64748b;
            stroke-width: 2.5;
            rx: 2;
        }

        .line-flow {
            fill: none;
            stroke: var(--border);
            stroke-width: 2;
            marker-end: url(#arrow);
            stroke-linejoin: round;
            stroke-linecap: round;
        }

        /* EXPANDED SHIELDS */
        .lbl-bg {
            fill: white;
            stroke: #cbd5e1;
            stroke-width: 1;
            rx: 4;
            fill-opacity: 1;
        }

        .lbl-txt {
            fill: #1e293b;
            font-size: 11px;
            font-weight: 800;
            text-anchor: middle;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .node-name {
            fill: #000000;
            font-size: 16px;
            font-weight: 800;
            text-anchor: middle;
        }

        .node-desc {
            fill: var(--primary);
            font-size: 11px;
            font-weight: 900;
            text-anchor: middle;
        }

        #arrow {
            fill: var(--border);
        }

        footer {
            padding: 10px;
            text-align: center;
            color: #94a3b8;
            font-size: 0.7rem;
            border-top: 1px solid #f1f5f9;
            background: #fff;
            flex-shrink: 0;
        }
    </style>
</head>

<body>

    <nav class="system-nav">
        <div class="brand">MOVEX ARCHITECT</div>
        <div class="tabs">
            <a href="index.html" class="tab-btn">Overview</a>
            <a href="level0.html" class="tab-btn">Level 0</a>
            <a href="level1.html" class="tab-btn active">Level 1</a>
        </div>
    </nav>

    <div class="viewport">
        <!-- 
             ULTRA SPACIOUS LAYOUT
             - Canvas: 1900 x 900
             - Text Shields: Widened to prevent any overlap.
             - Line Separation: Increased vertical gaps between parallel lines to 40px+.
        -->
        <svg viewBox="0 0 1900 900" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" />
                </marker>
            </defs>

            <!-- ================= NODES ================= -->

            <!-- ADMIN (Top Left) -->
            <g transform="translate(50, 50)">
                <rect class="box-entity" width="200" height="100" />
                <text class="node-name" x="100" y="50">System Admin</text>
                <text class="node-desc" x="100" y="75">GLOBAL OVERSEER</text>
            </g>

            <!-- CUSTOMER (Mid Left) -->
            <g transform="translate(50, 350)"> <!-- Lowered -->
                <rect class="box-entity" width="200" height="100" />
                <text class="node-name" x="100" y="50">End Customer</text>
                <text class="node-desc" x="100" y="75">BOOKING & TRACKING</text>
            </g>

            <!-- FRANCHISEE (Bottom Right) -->
            <g transform="translate(1600, 700)"> <!-- Further Right & Down -->
                <rect class="box-entity" width="200" height="100" />
                <text class="node-name" x="100" y="50">Franchisee Hub</text>
                <text class="node-desc" x="100" y="75">LOCAL OPERATIONS</text>
            </g>

            <!-- STAFF (Mid Right) -->
            <g transform="translate(1600, 350)">
                <rect class="box-entity" width="200" height="100" />
                <text class="node-name" x="100" y="50">Hub Staff</text>
                <text class="node-desc" x="100" y="75">LOGISTICS EXECUTION</text>
            </g>

            <!-- PROCESSES (Center Line Y=400) -->
            <g transform="translate(400, 350)">
                <rect class="box-process" width="200" height="120" />
                <rect x="0" y="0" width="200" height="30" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="100" y="65">1.0 Identity Service</text>
            </g>

            <g transform="translate(700, 350)">
                <rect class="box-process" width="200" height="120" />
                <rect x="0" y="0" width="200" height="30" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="100" y="65">2.0 Booking Cycle</text>
            </g>

            <g transform="translate(1000, 350)">
                <rect class="box-process" width="200" height="120" />
                <rect x="0" y="0" width="200" height="30" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="100" y="65">3.0 Pricing Registry</text>
            </g>

            <g transform="translate(1300, 350)">
                <rect class="box-process" width="200" height="120" />
                <rect x="0" y="0" width="200" height="30" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="100" y="65">4.0 Dispatch Engine</text>
            </g>

            <g transform="translate(400, 50)">
                <rect class="box-process" width="200" height="100" />
                <rect x="0" y="0" width="200" height="30" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="100" y="55">5.0 Admin Engine</text>
            </g>

            <!-- DATA STORES -->
            <g transform="translate(700, 200)">
                <rect class="box-store" width="200" height="70" />
                <rect x="0" y="0" width="15" height="70" fill="#64748b" />
                <text class="node-name" x="107" y="44" style="font-size:14px;">D1: Users & Roles</text>
            </g>

            <g transform="translate(700, 600)">
                <rect class="box-store" width="500" height="70" />
                <rect x="0" y="0" width="15" height="70" fill="#64748b" />
                <text class="node-name" x="257" y="44" style="font-size:14px;">D2: Shipments (Central Repository)</text>
            </g>

            <!-- ================= FLOWS (MAXIMUM SEPARATION) ================= -->

            <!-- 1. SYSTEM SETUP (Admin -> P5) -->
            <!-- Top Channel Y=90 -->
            <path class="line-flow" d="M250,90 L400,90" />
            <rect class="lbl-bg" x="280" y="80" width="90" height="20" fill="white" />
            <text class="lbl-txt" x="325" y="94">System Setup</text>

            <!-- 2. BUSINESS REPORTS (P5 -> Admin) -->
            <!-- Lower Channel Y=120 -->
            <path class="line-flow" d="M400,120 L250,120" />
            <rect class="lbl-bg" x="280" y="110" width="100" height="20" fill="white" />
            <text class="lbl-txt" x="330" y="124">Business Reports</text>


            <!-- 3. LOGIN INFO (Customer -> P1) -->
            <!-- Direct Middle Y=385 -->
            <path class="line-flow" d="M250,385 L400,385" />
            <rect class="lbl-bg" x="280" y="375" width="80" height="20" fill="white" />
            <text class="lbl-txt" x="320" y="389">Login Info</text>

            <!-- 4. BOOKING DETAILS (Customer -> P2) -->
            <!-- Deep Loop Y=500 -->
            <path class="line-flow" d="M250,420 L300,420 L300,500 L750,500 L750,470" />
            <rect class="lbl-bg" x="480" y="490" width="100" height="20" fill="white" />
            <text class="lbl-txt" x="530" y="504">Booking Details</text>

            <!-- 5. TRACKING INFO (P2 -> Customer) -->
            <!-- Sky Loop Y=280 -->
            <path class="line-flow" d="M850,350 L850,280 L300,280 L300,380 L250,380" />
            <rect class="lbl-bg" x="480" y="270" width="90" height="20" fill="white" />
            <text class="lbl-txt" x="525" y="284">Tracking Info</text>


            <!-- Internal: P1 -> P2 -->
            <path class="line-flow" d="M600,410 L700,410" />

            <!-- Internal: P2 -> P3 -->
            <path class="line-flow" d="M900,410 L1000,410" />

            <!-- Internal: P3 -> P4 -->
            <path class="line-flow" d="M1200,410 L1300,410" />


            <!-- 6. JOB LIST (P4 -> Staff) -->
            <!-- Top Lane Y=385 -->
            <path class="line-flow" d="M1500,385 L1600,385" />
            <rect class="lbl-bg" x="1515" y="375" width="70" height="20" fill="white" />
            <text class="lbl-txt" x="1550" y="389">Job List</text>

            <!-- 7. DELIVERY UPDATES (Staff -> P4) -->
            <!-- Bottom Lane Y=425 -->
            <path class="line-flow" d="M1600,425 L1500,425" />
            <rect class="lbl-bg" x="1510" y="415" width="100" height="20" fill="white" />
            <text class="lbl-txt" x="1560" y="429">Delivery Updates</text>


            <!-- 8. STAFF ASSIGNING (Franchisee -> P4) -->
            <!-- Route: Far Right X=1560, Up to Y=450 -->
            <path class="line-flow" d="M1700,700 L1700,500 L1450,500 L1450,470" />
            <rect class="lbl-bg" x="1550" y="490" width="100" height="20" fill="white" />
            <text class="lbl-txt" x="1600" y="504">Staff Assigning</text>

            <!-- 9. PRICE & WEIGHT (Franchisee -> P3) -->
            <!-- Route: Mid Right X=1450, Up to Y=550 -->
            <path class="line-flow" d="M1600,750 L1450,750 L1450,550 L1150,550 L1150,470" />
            <rect class="lbl-bg" x="1250" y="540" width="100" height="20" fill="white" />
            <text class="lbl-txt" x="1300" y="554">Price & Weight</text>

            <!-- 10. NEW REQUESTS (P3 -> Franchisee) -->
            <!-- Route: From P3 Down (X=1050), Right along bottom -->
            <path class="line-flow" d="M1050,470 L1050,750 L1600,750" />
            <!-- Note: 750 is same as P&W? No, P&W starts at 1600,750. -->
            <!-- Correction: P&W starts at Franchisee Left. New Requests ends at Franchisee Left? -->
            <!-- Let's separate them. P&W leaves Franchisee Top (1700, 700). New Requests enters Franchisee Left (1600, 750). -->
            <!-- REDO P&W: Leaves Franchisee (1700,700) -> Up -> Left. -->
            <!-- REDO NEW REQ: Leaves P3 (1050,470) -> Down -> Right -> Enters Franchisee (1600,750). -->

            <!-- ADJUSTED 10. NEW REQUESTS -->
            <path class="line-flow" d="M1050,470 L1050,800 L1600,800" /> <!-- Lower channel Y=800 -->
            <rect class="lbl-bg" x="1300" y="790" width="100" height="20" fill="white" />
            <text class="lbl-txt" x="1350" y="804">New Requests</text>


            <!-- DATA STORE LINKS (Cleaner Orthogonal) -->
            <path class="line-flow" d="M500,350 L500,235 L700,235" /> <!-- P1 -> D1 -->
            <path class="line-flow" d="M600,100 L800,100 L800,200" /> <!-- P5 -> D1 -->
            <path class="line-flow" d="M800,470 L800,600" /> <!-- P2 -> D2 -->
            <path class="line-flow" d="M1100,470 L1100,600" /> <!-- P3 -> D2 -->

        </svg>
    </div>

    <footer>
        MoveX Level 1 | Ultra-Spacious Layout | Final Polish
    </footer>

</body>

</html>