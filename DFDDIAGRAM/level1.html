<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoveX Engine | DFD Level 1 (Strict Consistency)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-soft: #f8fafc;
            --border: #1e293b;
            --grid: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #ffffff;
            color: #0f172a;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .system-nav {
            background: #ffffff;
            border-bottom: 2px solid #f1f5f9;
            display: flex;
            padding: 0 25px;
            height: 55px;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
            z-index: 1000;
        }

        .brand {
            font-weight: 800;
            font-size: 0.9rem;
            color: var(--primary);
            letter-spacing: -0.02em;
        }

        .tabs {
            display: flex;
            gap: 6px;
        }

        .tab-btn {
            text-decoration: none;
            color: #64748b;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 6px;
            text-transform: uppercase;
        }

        .tab-btn.active {
            background: var(--primary);
            color: #fff;
        }

        .viewport {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #ffffff;
            padding: 10px;
            overflow: hidden;
        }

        svg {
            width: 100%;
            height: 100%;
            max-width: 1600px;
            max-height: 100%;
        }

        .box-entity {
            fill: white;
            stroke: var(--border);
            stroke-width: 2.5;
            rx: 4;
        }

        .box-process {
            fill: var(--primary-soft);
            stroke: var(--primary);
            stroke-width: 3.5;
            rx: 8;
        }

        .box-store {
            fill: white;
            stroke: #64748b;
            stroke-width: 2.5;
            rx: 2;
        }

        .line-flow {
            fill: none;
            stroke: var(--border);
            stroke-width: 2;
            marker-end: url(#arrow);
            stroke-linejoin: round;
            stroke-linecap: round;
        }

        .lbl-bg {
            fill: white;
            stroke: #cbd5e1;
            stroke-width: 1;
            rx: 4;
            fill-opacity: 1;
        }

        .lbl-txt {
            fill: #1e293b;
            font-size: 10px;
            font-weight: 800;
            text-anchor: middle;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .node-name {
            fill: #000000;
            font-size: 15px;
            font-weight: 800;
            text-anchor: middle;
        }

        .node-desc {
            fill: var(--primary);
            font-size: 10px;
            font-weight: 900;
            text-anchor: middle;
        }

        .node-meta {
            fill: #64748b;
            font-size: 10px;
            font-weight: 500;
            text-anchor: middle;
        }

        #arrow {
            fill: var(--border);
        }

        footer {
            padding: 10px;
            text-align: center;
            color: #94a3b8;
            font-size: 0.7rem;
            border-top: 1px solid #f1f5f9;
            background: #fff;
            flex-shrink: 0;
        }
    </style>
</head>

<body>

    <nav class="system-nav">
        <div class="brand">MOVEX ARCHITECT</div>
        <div class="tabs">
            <a href="index.html" class="tab-btn">Overview</a>
            <a href="level0.html" class="tab-btn">Level 0</a>
            <a href="level1.html" class="tab-btn active">Level 1</a>
        </div>
    </nav>

    <div class="viewport">
        <!-- 
             CORRECTED ZONES & FLOWS
             Using EXACT contextual labels:
             - LOGIN INFO, BOOKING DETAILS, TRACKING INFO
             - SYSTEM SETUP, BUSINESS REPORTS
             - PRICE & WEIGHT, STAFF ASSIGNING, NEW REQUESTS
             - JOB LIST, DELIVERY UPDATES
        -->
        <svg viewBox="0 0 1600 850" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" />
                </marker>
            </defs>

            <!-- ================= NODES ================= -->

            <!-- ADMIN (Top Left) -->
            <g transform="translate(50, 50)">
                <rect class="box-entity" width="160" height="90" />
                <text class="node-name" x="80" y="45">System Admin</text>
                <text class="node-desc" x="80" y="70">GLOBAL OVERSEER</text>
            </g>

            <!-- CUSTOMER (Mid Left) -->
            <g transform="translate(50, 300)">
                <rect class="box-entity" width="160" height="90" />
                <text class="node-name" x="80" y="45">Customer</text>
                <text class="node-desc" x="80" y="70">BOOKING & TRACKING</text>
            </g>

            <!-- FRANCHISEE (Bottom Right) -->
            <g transform="translate(1300, 600)">
                <rect class="box-entity" width="180" height="90" />
                <text class="node-name" x="90" y="45">Franchisee Hub</text>
                <text class="node-desc" x="90" y="70">LOCAL OPERATIONS</text>
            </g>

            <!-- STAFF (Mid Right) -->
            <g transform="translate(1300, 300)">
                <rect class="box-entity" width="160" height="90" />
                <text class="node-name" x="80" y="45">Hub Staff</text>
                <text class="node-desc" x="80" y="70">LOGISTICS EXECUTION</text>
            </g>

            <!-- PROCESSES (Center Line) -->
            <g transform="translate(280, 300)">
                <rect class="box-process" width="180" height="100" />
                <rect x="0" y="0" width="180" height="25" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="90" y="60">1.0 Identity Service</text>
            </g>

            <g transform="translate(530, 300)">
                <rect class="box-process" width="180" height="100" />
                <rect x="0" y="0" width="180" height="25" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="90" y="60">2.0 Booking Cycle</text>
            </g>

            <g transform="translate(780, 300)">
                <rect class="box-process" width="180" height="100" />
                <rect x="0" y="0" width="180" height="25" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="90" y="60">3.0 Pricing Registry</text>
            </g>

            <g transform="translate(1030, 300)">
                <rect class="box-process" width="180" height="100" />
                <rect x="0" y="0" width="180" height="25" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="90" y="60">4.0 Dispatch Engine</text>
            </g>

            <g transform="translate(280, 50)">
                <rect class="box-process" width="180" height="90" />
                <rect x="0" y="0" width="180" height="25" fill="var(--primary)" opacity="0.1" />
                <text class="node-name" x="90" y="55">5.0 Admin Engine</text>
            </g>

            <!-- DATA STORES -->
            <g transform="translate(530, 160)">
                <rect class="box-store" width="180" height="60" />
                <rect x="0" y="0" width="10" height="60" fill="#64748b" />
                <text class="node-name" x="95" y="38" style="font-size:12px;">D1: Users & Roles</text>
            </g>

            <g transform="translate(530, 550)">
                <rect class="box-store" width="400" height="60" />
                <rect x="0" y="0" width="10" height="60" fill="#64748b" />
                <text class="node-name" x="200" y="38" style="font-size:12px;">D2: Shipments</text>
            </g>

            <!-- ================= FLOWS (EXACT TERMS) ================= -->

            <!-- 1. SYSTEM SETUP (Admin -> P5) -->
            <path class="line-flow" d="M210,95 L280,95" />
            <rect class="lbl-bg" x="215" y="86" width="65" height="18" fill="white" />
            <text class="lbl-txt" x="247" y="98">System Setup</text>

            <!-- 2. BUSINESS REPORTS (P5 -> Admin) -->
            <path class="line-flow" d="M280,115 L210,115" />
            <rect class="lbl-bg" x="215" y="125" width="65" height="18" fill="white" />
            <text class="lbl-txt" x="247" y="137">Business Reports</text>

            <!-- 3. LOGIN INFO (Customer -> P1) -->
            <path class="line-flow" d="M210,330 L280,330" />
            <rect class="lbl-bg" x="220" y="321" width="60" height="18" fill="white" />
            <text class="lbl-txt" x="250" y="333">Login Info</text>

            <!-- 4. BOOKING DETAILS (Customer -> P2) -->
            <!-- Route: Under P1 -->
            <path class="line-flow" d="M210,380 L250,380 L250,420 L500,420 L500,380 L530,380" />
            <rect class="lbl-bg" x="350" y="411" width="80" height="18" fill="white" />
            <text class="lbl-txt" x="390" y="423">Booking Details</text>

            <!-- 5. TRACKING INFO (P2 -> Customer) -->
            <!-- Route: Over P1 -->
            <path class="line-flow" d="M530,330 L500,330 L500,280 L250,280 L250,345 L210,345" />
            <rect class="lbl-bg" x="350" y="271" width="70" height="18" fill="white" />
            <text class="lbl-txt" x="385" y="283">Tracking Info</text>


            <!-- Internal: P1 -> P2 -->
            <path class="line-flow" d="M460,350 L530,350" />

            <!-- Internal: P2 -> P3 -->
            <path class="line-flow" d="M710,350 L780,350" />

            <!-- Internal: P3 -> P4 -->
            <path class="line-flow" d="M960,350 L1030,350" />


            <!-- 6. JOB LIST (P4 -> Staff) -->
            <path class="line-flow" d="M1210,345 L1300,345" />
            <rect class="lbl-bg" x="1230" y="336" width="50" height="18" fill="white" />
            <text class="lbl-txt" x="1255" y="348">Job List</text>

            <!-- 7. DELIVERY UPDATES (Staff -> P4) -->
            <path class="line-flow" d="M1300,365 L1210,365" />
            <rect class="lbl-bg" x="1225" y="375" width="80" height="18" fill="white" />
            <text class="lbl-txt" x="1265" y="387">Delivery Updates</text>

            <!-- 8. STAFF ASSIGNING (Franchisee -> P4) -->
            <!-- Route: From Right, Up, Left -->
            <path class="line-flow" d="M1400,600 L1400,450 L1150,450 L1150,400" />
            <rect class="lbl-bg" x="1250" y="441" width="80" height="18" fill="white" />
            <text class="lbl-txt" x="1290" y="453">Staff Assigning</text>

            <!-- 9. PRICE & WEIGHT (Franchisee -> P3) -->
            <!-- Route: Left, Up, Left -->
            <path class="line-flow" d="M1300,645 L870,645 L870,400" />
            <rect class="lbl-bg" x="1050" y="636" width="80" height="18" fill="white" />
            <text class="lbl-txt" x="1090" y="648">Price & Weight</text>

            <!-- 10. NEW REQUESTS (P3 -> Franchisee) -->
            <!-- Route: Down, Right -->
            <path class="line-flow" d="M900,400 L900,620 L1300,620" />
            <rect class="lbl-bg" x="1050" y="611" width="80" height="18" fill="white" />
            <text class="lbl-txt" x="1090" y="623">New Requests</text>


            <!-- DATA STORE LINKS -->
            <path class="line-flow" d="M370,300 L370,190 L530,190" /> <!-- P1 -> D1 -->
            <path class="line-flow" d="M460,95 L620,95 L620,160" /> <!-- P5 -> D1 -->
            <path class="line-flow" d="M620,400 L620,550" /> <!-- P2 -> D2 -->
            <path class="line-flow" d="M840,400 L840,550" /> <!-- P3 -> D2 -->

        </svg>
    </div>

    <footer>
        MoveX Linear Flow | Terminology Synced with Level 0
    </footer>

</body>

</html>